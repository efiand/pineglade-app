# pineglade-app

Сервер, сборщик статических страниц и линтер с нулевой конфигурацией.

## Используемые инструменты

- [fastify](https://fastify.io) - сервер (генерирует HTML в режиме разработки, может использоваться для бэкенда).
- [browser-sync](https://browsersync.io/) - слежение за файлами: запуск кастомных задач и перезагрузка страниц в браузерах.
- [svelte](https://ru.svelte.dev/) - шаблонизация на клиентской и серверной стороне, JS-логика (связывание данных и реактивность) из одних и тех же исходников.
- [webpack](https://webpack.js.org/) - сборка серверных и клиентских вариантов svelte-приложения.
- [eslint](https://eslint.org/) - линтинг скриптов и svelte-компонентоа.
- [postcss](https://postcss.org/) - сборка стилей из исходников с использованием возможностей препроцессоров.
- [stylelint](https://stylelint.io/) - линтинг стилей.
- [pineglade-w3c](https://www.npmjs.com/package/pineglade-w3c) - валидация HTML (с оффлайн-фоллбэком при недоступности онлайн-валидатора).
- [pineglade-config](https://www.npmjs.com/package/pineglade-config) - валидация БЭМ и набор настроек для svgo, eslint, stylelint.
- [pineglade-pp](https://www.npmjs.com/package/pineglade-pp/) - плагин для pixelperfect-верстки. Доступен в режиме разработки по нажатию клавиши P.

- less + postcss + stylelint - сборка из компонентов и линтинг CSS.
- webpack + eslint - сборка из компонентов и линтинг JS.
- svgo, pngquant, mozjpeg, gulp-svg-sprite - оптимизация графики.

## Особенности реализации

- Компонентный подход. Для организации разметки и стилей использована методология БЭМ. Компоненты переиспользуются с разным набором данных, получаемых на стороне сервера. ля разработки стилей не используется фреймворк: стили внутри компонента раздувают логику, снижают производительность и скорость сборки и имеют ряд ограничений использования БЭМ-миксов из-за изоляции стилей.
- Адаптивная вёрстка "mobile first" - дефолтной является мобильная версия, на которую нет макета, но она представляет собой в основном просто одноколоночный поток данных с чуть меньшими расстояниями и размерами текстов. Медиазапросы строятся от меньшего к большему - таким образом сделана планшетная версия (только часть стилей добавляется для максимального десктопного разрешения).
- Поддержка webp- и avif-изображений через подключение одного универсального компонента.

## Структура

- `common` - общая кодовая база для сервера и клиента.
- `client` - каталог исходников клиентского приложения.
- `run` - самописный менеджер задач, управляющий сочетанием бандлеров и вотчеров.
- `public` - корень сайта на сервере. Статические файлы, бандлы клиентского приложения.
- `server` - бэкенд-сервер и источник общих для сервера и сборщика библиотек.

## Установка

- Если менедже пакетов PNPM не установлен, установите его глобально с помощью команды `npm i -g pnpm`.
- Выполните команду `pnpm i`.

## Команды

- `pnpm build` - сборка стилей, скриптов, спрайта, оптимизация изображений для продакшн-режима.
- `pnpm dev` - сборка и запуск сервера в режиме раработки.
- `pnpm start` - запуск сервера в продакшн-режиме.
- `pnpm test` - запуск линтеров и тестов (валидация HTML, БЭМ).
